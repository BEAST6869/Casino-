import prisma from "./prisma";export async function getTransferableAmount(walletId: string) {  const earnedTypes = ["income","job","game_win","payout"];   const earnedAgg = await prisma.transaction.aggregate({    where: { walletId, type: { in: earnedTypes } },    _sum: { amount: true }  });  const earnedSum = (earnedAgg._sum.amount ?? 0);  const outAgg = await prisma.transaction.aggregate({    where: { walletId, type: "transfer_sent" },    _sum: { amount: true }  });  const transferredOut = (outAgg._sum.amount ?? 0);  const transferable = Math.max(0, earnedSum - transferredOut);  return { transferable, earnedSum, transferredOut };}