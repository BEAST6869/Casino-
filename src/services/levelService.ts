import { PrismaClient } from '@prisma/client';const prisma = new PrismaClient();const COOLDOWN_SECONDS = 60;const xpCooldowns = new Map<string, number>();export class LevelService {    static calculateLevel(xp: number): number {        let level = 0;        let xpForNext = 100;         return level;    }    static getXpForNextLevel(level: number): number {        return 5 * (level * level) + 50 * level + 100;    }    static async addXp(userId: string, guildId: string, amount: number) {        const now = Date.now();        const key = `${userId}-${guildId}`;        const lastXp = xpCooldowns.get(key) || 0;        if (now - lastXp < COOLDOWN_SECONDS * 1000) {            return null;         }        xpCooldowns.set(key, now);        let user = await prisma.user.findUnique({            where: { discordId_guildId: { discordId: userId, guildId } },        });        if (!user) {            return;        }        let newXp = user.xp + amount;        let newLevel = user.level;        let leveledUp = false;        let requiredXp = this.getXpForNextLevel(newLevel);        while (newXp >= requiredXp) {            newXp -= requiredXp;             newXp -= requiredXp;            newLevel++;            leveledUp = true;            requiredXp = this.getXpForNextLevel(newLevel);        }        const updatedUser = await prisma.user.update({            where: { discordId_guildId: { discordId: userId, guildId } },            data: {                xp: newXp,                level: newLevel,            },        });        return { leveledUp, newLevel, user: updatedUser };    }}