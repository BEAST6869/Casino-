import { Message } from "discord.js";import { ensureUserAndWallet } from "../../services/walletService";import { getBankByUserId } from "../../services/bankService";import { getGuildConfig } from "../../services/guildConfigService";import { balanceEmbed, errorEmbed } from "../../utils/embed";export async function handleBalance(message: Message) {  let targetUser = message.mentions.users.first();  if (!targetUser) {    targetUser = message.author;  }  if (targetUser.bot) {    return message.reply({      embeds: [errorEmbed(message.author, "Error", "Bots do not have wallets.")]    });  }  const user = await ensureUserAndWallet(targetUser.id, message.guildId!, targetUser.tag);  const bank = await getBankByUserId(user.id);  const config = await getGuildConfig(message.guildId!);  return message.reply({    embeds: [      balanceEmbed(targetUser, user.wallet!.balance, bank?.balance ?? 0, config.currencyEmoji, config.walletLimit, config.bankLimit)    ]  });}